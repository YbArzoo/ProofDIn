<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProofdIn - Candidate Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4a6cf7;
            --primary-dark: #3a56d4;
            --primary-light: #eef2ff;
            --secondary: #6c757d;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --border-radius: 8px;
            --box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }

        /* Header & Navigation */
        .dashboard-header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .dashboard-nav {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 42px;
            height: 42px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 8px;
        }

        .logo-icon i {
            color: white;
            font-size: 1.3rem;
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .btn {
            padding: 0.6rem 1.5rem;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 1rem;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* Main Dashboard Layout */
        .dashboard-container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
        }

        /* Sidebar */
        .sidebar {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
            height: fit-content;
        }

        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 0.8rem;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 0.8rem 1rem;
            text-decoration: none;
            color: var(--secondary);
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background-color: var(--primary-light);
            color: var(--primary);
        }

        .sidebar-menu i {
            width: 20px;
            text-align: center;
        }

        /* Dashboard Main Content */
        .dashboard-main {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        /* Welcome Card */
        .welcome-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
        }

        .welcome-card h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .welcome-card p {
            opacity: 0.9;
            margin-bottom: 1.5rem;
        }

        .welcome-stats {
            display: flex;
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .stat {
            display: flex;
            flex-direction: column;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Section Cards */
        .section-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .section-subtitle {
            color: var(--secondary);
            margin-bottom: 1.5rem;
        }

        /* Tailored Resume Section */
        .resume-tailor {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 1rem;
        }

        .job-input {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .job-input textarea {
            width: 100%;
            height: 150px;
            padding: 1rem;
            border: 1px solid #e0e0e0;
            border-radius: var(--border-radius);
            resize: vertical;
            font-size: 1rem;
        }

        .job-input textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .tailored-resume-preview {
            background-color: #f9f9f9;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            border: 1px dashed #ccc;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .tailored-resume-preview i {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        /* Skills Grid */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .skill-card {
            border: 1px solid #e0e0e0;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            transition: var(--transition);
        }

        .skill-card:hover {
            border-color: var(--primary);
            box-shadow: var(--box-shadow);
        }

        .skill-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .skill-name {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .skill-level {
            background-color: var(--primary-light);
            color: var(--primary);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .skill-details {
            color: var(--secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .skill-last-used {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--secondary);
        }

        .skill-attachments {
            margin-top: 1rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .attachment-tag {
            background-color: #f0f0f0;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Skill Gaps Section */
        .skill-gaps {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 1rem;
        }

        .missing-skills-list {
            list-style: none;
        }

        .missing-skill {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #f0f0f0;
        }

        .missing-skill:last-child {
            border-bottom: none;
        }

        .practice-project {
            background-color: #f9f9f9;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .practice-project h4 {
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        /* Portfolio Section */
        .portfolio-settings {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 1rem;
        }

        .portfolio-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background-color: #f9f9f9;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary);
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        .privacy-controls {
            margin-top: 1.5rem;
        }

        .privacy-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #f0f0f0;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .resume-tailor,
            .skill-gaps,
            .portfolio-settings {
                grid-template-columns: 1fr;
            }
            
            .skills-grid {
                grid-template-columns: 1fr;
            }
            
            .welcome-stats {
                flex-direction: column;
                gap: 1rem;
            }
            
            .dashboard-nav {
                flex-direction: column;
                gap: 1rem;
            }
        }
        /* Resume Preview Modal */

        .resume-preview-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.45);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(2px);
        }

        .resume-preview-modal.hidden {
            display: none;
        }

        .resume-preview-content {
            background: #ffffff;
            padding: 2rem;
            width: 700px;
            max-width: 95vw;
            max-height: 85vh;
            overflow-y: auto;
            border-radius: var(--border-radius);
            box-shadow: 0 20px 60px rgba(15,23,42,0.35);
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            border: none;
            background-color: #f3f4f6;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn i {
            font-size: 0.9rem;
            color: var(--secondary);
        }

        .resume-preview-body {
            border: 1px solid #e5e7eb;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            background: #fafafa;
            margin-top: 1.2rem;
            font-size: 0.95rem;
        }

        .resume-section {
            margin-top: 1rem;
        }

        .resume-section-title {
            font-size: 1.05rem;
            font-weight: 700;
            margin-bottom: 0.4rem;
        }
    /* 2-column resume layout */
        .resume-preview-body {
            border: 1px solid #e5e7eb;
            padding: 0;
            border-radius: var(--border-radius);
            background: #ffffff;
            margin-top: 1.2rem;
            font-size: 0.95rem;
            overflow: hidden;
        }

        /* overall grid */
        .resume-grid {
            display: grid;
            grid-template-columns: 0.9fr 1.6fr;
            min-height: 400px;
            margin: 0; /* important to avoid extra blank space */
        }


        /* left column */
        .resume-left {
            background: linear-gradient(180deg, #1f2937, #111827);
            color: #e5e7eb;
            padding: 1.5rem 1.3rem;
        }

        .resume-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.1rem;
        }

        .resume-title {
            font-size: 0.9rem;
            color: #9ca3af;
            margin-bottom: 1.2rem;
        }

        .resume-contact {
            font-size: 0.8rem;
            margin-bottom: 1.3rem;
        }

        .resume-contact div {
            margin-bottom: 0.2rem;
        }

        .resume-pill {
            display: inline-flex;
            padding: 0.15rem 0.55rem;
            border-radius: 999px;
            background: rgba(59, 130, 246, 0.15);
            color: #dbeafe;
            font-size: 0.75rem;
            margin-right: 0.3rem;
            margin-bottom: 0.3rem;
        }

        .resume-left-section {
            margin-top: 1.2rem;
        }

        .resume-left-section h3 {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #9ca3af;
            margin-bottom: 0.4rem;
        }

        /* right column */
        .resume-right {
            padding: 1.5rem 1.6rem;
            background: #f9fafb;
        }

        .resume-header-line {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .resume-header-line span {
            font-size: 0.8rem;
            color: #6b7280;
        }

        .resume-section {
            margin-top: 1rem;
        }

        .resume-section-title {
            font-size: 0.95rem;
            font-weight: 700;
            margin-bottom: 0.4rem;
            color: #111827;
        }

        .resume-section p {
            font-size: 0.9rem;
            color: #4b5563;
        }

        .resume-section ul {
            margin-left: 1.1rem;
            margin-top: 0.3rem;
            color: #4b5563;
            font-size: 0.9rem;
        }

        .resume-section ul li + li {
            margin-top: 0.2rem;
        }

        .jd-snippet {
            font-size: 0.82rem;
            color: #6b7280;
            background: #f3f4f6;
            padding: 0.6rem 0.7rem;
            border-radius: 0.6rem;
            white-space: pre-line;
            border: 1px dashed #e5e7eb;
        }

    </style>
</head>
<body>
    <!-- Dashboard Header -->
    <header class="dashboard-header">
        <nav class="dashboard-nav">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-search-check"></i>
                </div>
                <div class="logo-text">ProofdIn</div>
            </div>
            
            <div class="user-menu">
                <div class="user-profile">
                    <div class="avatar" id="user-avatar">JD</div>
                    <div>
                        <div id="user-name" style="font-weight: 600;">Candidate Name</div>
                        <div id="user-role" style="font-size: 0.9rem; color: var(--secondary);">Candidate</div>
                    </div>
                </div>
                <button class="btn btn-primary" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
            
        </nav>
    </header>

    <!-- Dashboard Content -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-title">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </div>
            <ul class="sidebar-menu">
                <li><a href="#tailored-resume" class="active"><i class="fas fa-file-pdf"></i> Tailored Resumes</a></li>
                <li><a href="#skills-grid"><i class="fas fa-th-large"></i> Skills Grid</a></li>
                <li><a href="#skill-proof"><i class="fas fa-link"></i> Skill Proof</a></li>
                <li><a href="#skill-gaps"><i class="fas fa-chart-line"></i> Skill Gaps</a></li>
                <li><a href="#portfolio"><i class="fas fa-globe"></i> Portfolio</a></li>
                <li><a href="#settings"><i class="fas fa-cog"></i> Settings</a></li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Welcome Card -->
            <section class="welcome-card">
                <h1 id="welcome-heading">Welcome back!</h1>
                <p id="welcome-subtext">
                    Your resume is 85% optimized. Continue improving to increase your interview chances.
                </p>
                <div class="welcome-stats">
                    <div class="stat">
                        <div class="stat-value">12</div>
                        <div class="stat-label">Tailored Resumes</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">24</div>
                        <div class="stat-label">Skills Tracked</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">8</div>
                        <div class="stat-label">Projects Linked</div>
                    </div>
                </div>
            </section>
            

            <!-- Tailored Resume Section -->
            <section id="tailored-resume" class="section-card">
                <div class="section-header">
                    <h2 class="section-title">Tailored Resumes</h2>
                    <button class="btn btn-primary">
                        <i class="fas fa-download"></i> Download All
                    </button>
                </div>
                <p class="section-subtitle">One resume, many versions: Paste a job post to get a tailored PDF in 1 click.</p>
                
                <div class="resume-tailor">
                    <div class="job-input">
                        <textarea id="jobDescription" placeholder="Paste a job description here...">Senior Frontend Developer with 5+ years of experience in React, TypeScript, and modern JavaScript frameworks. Experience with state management (Redux, Context API), testing (Jest, Cypress), and CI/CD pipelines. Strong understanding of web performance optimization and responsive design.</textarea>
                        <button class="btn btn-primary" onclick="generateResume()">
                            <i class="fas fa-magic"></i> Generate Tailored Resume
                        </button>
                    </div>
                    
                    <div class="tailored-resume-preview">
                        <i class="fas fa-file-pdf"></i>
                        <h3>Senior Frontend Developer.pdf</h3>
                        <p>Tailored for: TechCorp Inc.</p>
                        <p>Generated: Today, 10:30 AM</p>
                        <div style="margin-top: 1rem; display: flex; gap: 1rem;">
                            <button class="btn btn-primary" style="padding: 0.5rem 1rem;" onclick="openResumePreview()">
                                <i class="fas fa-eye"></i> Preview
                            </button>

                            <button class="btn btn-primary" onclick="downloadResumePDF()">
                                <i class="fas fa-download"></i> Download PDF
                            </button>

                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem;">Recent Tailored Resumes</h3>
                    <div style="display: flex; gap: 1rem; overflow-x: auto; padding: 0.5rem 0;">
                        <div class="tailored-resume-preview" style="min-width: 200px;">
                            <i class="fas fa-file-pdf"></i>
                            <p>Full Stack Developer.pdf</p>
                        </div>
                        <div class="tailored-resume-preview" style="min-width: 200px;">
                            <i class="fas fa-file-pdf"></i>
                            <p>React Developer.pdf</p>
                        </div>
                        <div class="tailored-resume-preview" style="min-width: 200px;">
                            <i class="fas fa-file-pdf"></i>
                            <p>UI Engineer.pdf</p>
                        </div>
                    </div>
                </div>
                

            </section>


            <!-- Skills Grid Section -->
            <section id="skills-grid" class="section-card">
                <div class="section-header">
                    <h2 class="section-title">Skills Grid</h2>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Skill
                    </button>
                </div>
                <p class="section-subtitle">See your skills clearly: A grid shows each skill and when you last used it.</p>
                
                <div class="skills-grid">
                    <div class="skill-card">
                        <div class="skill-header">
                            <div class="skill-name">React</div>
                            <div class="skill-level">Expert</div>
                        </div>
                        <div class="skill-details">
                            JavaScript library for building user interfaces
                        </div>
                        <div class="skill-last-used">
                            <i class="far fa-calendar"></i>
                            <span>Last used: 2 weeks ago</span>
                        </div>
                        <div class="skill-attachments">
                            <span class="attachment-tag">
                                <i class="fas fa-link"></i> GitHub PR
                            </span>
                            <span class="attachment-tag">
                                <i class="fas fa-video"></i> Demo
                            </span>
                        </div>
                    </div>
                    
                    <div class="skill-card">
                        <div class="skill-header">
                            <div class="skill-name">TypeScript</div>
                            <div class="skill-level">Advanced</div>
                        </div>
                        <div class="skill-details">
                            Typed superset of JavaScript
                        </div>
                        <div class="skill-last-used">
                            <i class="far fa-calendar"></i>
                            <span>Last used: 1 week ago</span>
                        </div>
                        <div class="skill-attachments">
                            <span class="attachment-tag">
                                <i class="fas fa-certificate"></i> Certificate
                            </span>
                        </div>
                    </div>
                    
                    <div class="skill-card">
                        <div class="skill-header">
                            <div class="skill-name">Node.js</div>
                            <div class="skill-level">Intermediate</div>
                        </div>
                        <div class="skill-details">
                            JavaScript runtime for server-side development
                        </div>
                        <div class="skill-last-used">
                            <i class="far fa-calendar"></i>
                            <span>Last used: 1 month ago</span>
                        </div>
                        <div class="skill-attachments">
                            <span class="attachment-tag">
                                <i class="fas fa-link"></i> Live Project
                            </span>
                        </div>
                    </div>
                    
                    
                </div>
            </section>

            <!-- Skill Proof Section -->
            <section id="skill-proof" class="section-card">
                <div class="section-header">
                    <h2 class="section-title">Skill Proof</h2>
                    <button class="btn btn-primary">
                        <i class="fas fa-link"></i> Add Proof
                    </button>
                </div>
                <p class="section-subtitle">Prove what you know: Attach links to PRs, demos, or certificates for each skill.</p>
                
                <div style="margin-top: 1.5rem;">
                    <div class="skill-card" style="margin-bottom: 1rem;">
                        <div class="skill-header">
                            <div class="skill-name">React Performance Optimization</div>
                            <div class="skill-level">Proof Added</div>
                        </div>
                        <div class="skill-details">
                            Reduced bundle size by 40% and improved Lighthouse score from 65 to 95
                        </div>
                        <div class="skill-attachments" style="margin-top: 1rem;">
                            <span class="attachment-tag" style="background-color: #e8f5e9; color: #2e7d32;">
                                <i class="fab fa-github"></i> GitHub PR #245
                            </span>
                            <span class="attachment-tag" style="background-color: #e3f2fd; color: #1565c0;">
                                <i class="fas fa-chart-line"></i> Performance Report
                            </span>
                            <span class="attachment-tag" style="background-color: #f3e5f5; color: #7b1fa2;">
                                <i class="fas fa-video"></i> Demo Video
                            </span>
                        </div>
                    </div>
                    
                    <div class="skill-card">
                        <div class="skill-header">
                            <div class="skill-name">TypeScript Migration</div>
                            <div class="skill-level">Proof Added</div>
                        </div>
                        <div class="skill-details">
                            Successfully migrated 15K lines of JavaScript to TypeScript
                        </div>
                        <div class="skill-attachments" style="margin-top: 1rem;">
                            <span class="attachment-tag" style="background-color: #e8f5e9; color: #2e7d32;">
                                <i class="fab fa-github"></i> GitHub PR #189
                            </span>
                            <span class="attachment-tag" style="background-color: #fff8e1; color: #ff8f00;">
                                <i class="fas fa-file-code"></i> Migration Guide
                            </span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Skill Gaps Section -->
            <section id="skill-gaps" class="section-card">
                <div class="section-header">
                    <h2 class="section-title">Skill Gaps</h2>
                    <button class="btn btn-primary">
                        <i class="fas fa-sync-alt"></i> Re-analyze
                    </button>
                </div>
                <p class="section-subtitle">Close the gaps: AI suggests missing skills and tiny practice projects to learn them.</p>
                
                <div class="skill-gaps">
                    <div>
                        <h3 style="margin-bottom: 1rem;">Missing Skills for "Senior Frontend Developer"</h3>
                        <ul class="missing-skills-list">
                            <li class="missing-skill">
                                <div>
                                    <div style="font-weight: 600;">GraphQL</div>
                                    <div style="font-size: 0.9rem; color: var(--secondary);">Required by 65% of senior roles</div>
                                </div>
                                <button class="btn" style="padding: 0.3rem 0.8rem; font-size: 0.9rem;">
                                    Learn
                                </button>
                            </li>
                            <li class="missing-skill">
                                <div>
                                    <div style="font-weight: 600;">WebSocket</div>
                                    <div style="font-size: 0.9rem; color: var(--secondary);">Required by 45% of senior roles</div>
                                </div>
                                <button class="btn" style="padding: 0.3rem 0.8rem; font-size: 0.9rem;">
                                    Learn
                                </button>
                            </li>
                            <li class="missing-skill">
                                <div>
                                    <div style="font-weight: 600;">Jest Advanced Testing</div>
                                    <div style="font-size: 0.9rem; color: var(--secondary);">Required by 70% of senior roles</div>
                                </div>
                                <button class="btn" style="padding: 0.3rem 0.8rem; font-size: 0.9rem;">
                                    Learn
                                </button>
                            </li>
                        </ul>
                    </div>
                    
                    <div>
                        <h3 style="margin-bottom: 1rem;">Recommended Practice Projects</h3>
                        <div class="practice-project">
                            <h4>Build a Real-time Chat App</h4>
                            <p>Practice WebSocket and real-time data handling. Estimated time: 4-6 hours.</p>
                            <button class="btn btn-primary" style="margin-top: 0.5rem; padding: 0.5rem 1rem;">
                                Start Project
                            </button>
                        </div>
                        <div class="practice-project">
                            <h4>Create a GraphQL API</h4>
                            <p>Learn GraphQL queries, mutations, and subscriptions. Estimated time: 3-5 hours.</p>
                            <button class="btn btn-primary" style="margin-top: 0.5rem; padding: 0.5rem 1rem;">
                                Start Project
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Portfolio Section -->
            <section id="portfolio" class="section-card">
                <div class="section-header">
                    <h2 class="section-title">Portfolio Showcase</h2>
                    <button class="btn btn-primary">
                        <i class="fas fa-external-link-alt"></i> View Portfolio
                    </button>
                </div>
                <p class="section-subtitle">Showcase safely: Optional public portfolio page, with privacy controls for what's shown.</p>
                
                <div class="portfolio-settings">
                    <div>
                        <div class="portfolio-toggle">
                            <div>
                                <div style="font-weight: 600;">Public Portfolio</div>
                                <div style="font-size: 0.9rem; color: var(--secondary);">Your portfolio is currently public</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="privacy-controls">
                            <h4 style="margin-bottom: 1rem;">Privacy Controls</h4>
                            <div class="privacy-item">
                                <div>
                                    <div style="font-weight: 600;">Show Contact Information</div>
                                    <div style="font-size: 0.9rem; color: var(--secondary);">Email and phone number</div>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="privacy-item">
                                <div>
                                    <div style="font-weight: 600;">Show Current Employer</div>
                                    <div style="font-size: 0.9rem; color: var(--secondary);">Your current company</div>
                                </div>
                                <label class="switch">
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="privacy-item">
                                <div>
                                    <div style="font-weight: 600;">Show Skill Proof Links</div>
                                    <div style="font-size: 0.9rem; color: var(--secondary);">GitHub, demos, certificates</div>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background-color: #f9f9f9; border-radius: var(--border-radius); padding: 1.5rem;">
                        <h4 style="margin-bottom: 1rem;">Portfolio Preview</h4>
                        <div style="background-color: white; border-radius: var(--border-radius); padding: 1.5rem; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                <div class="avatar" style="width: 60px; height: 60px; font-size: 1.5rem;">JD</div>
                                <div>
                                    <div style="font-weight: 700; font-size: 1.2rem;">Nafisaa</div>
                                    <div style="color: var(--secondary);">Senior Frontend Developer</div>
                                </div>
                            </div>
                            <p style="margin-bottom: 1rem;">5+ years of experience in building scalable web applications with React and TypeScript.</p>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem;">
                                <span style="background-color: var(--primary-light); color: var(--primary); padding: 0.3rem 0.8rem; border-radius: 4px; font-size: 0.9rem;">React</span>
                                <span style="background-color: var(--primary-light); color: var(--primary); padding: 0.3rem 0.8rem; border-radius: 4px; font-size: 0.9rem;">TypeScript</span>
                                <span style="background-color: var(--primary-light); color: var(--primary); padding: 0.3rem 0.8rem; border-radius: 4px; font-size: 0.9rem;">Node.js</span>
                            </div>
                            <div style="font-size: 0.9rem; color: var(--secondary);">
                                <i class="fas fa-eye"></i> 245 views this month
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
        <!-- Tailored Resume Preview Modal -->
    <div id="resumePreviewModal" class="resume-preview-modal hidden">
        <div class="resume-preview-content">
            <button class="close-btn" onclick="closeResumePreview()">
                <i class="fas fa-times"></i>
            </button>

            <h2>Tailored Resume Preview</h2>

            <!-- The generated preview will be inserted here -->
            <div id="resumePreviewBody" class="resume-preview-body">
                <!-- Filled dynamically -->
            </div>

            <div class="resume-preview-actions">
                <button class="btn btn-primary">
                    <i class="fas fa-download"></i> Download PDF
                </button>
            </div>
        </div>
    </div>
    
    <!-- html2pdf library for downloading resume as PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <script>
                // Store last generated data for preview
        let lastGeneratedJobTitle = 'Senior Frontend Developer';
        let lastGeneratedJD = '';
        let lastGeneratedTime = '';

        // Function to generate tailored resume
        function generateResume() {
            const jobDescription = document.getElementById('jobDescription').value;
            if (!jobDescription.trim()) {
                alert('Please paste a job description first.');
                return;
            }
            
            // Show loading/processing
            const button = document.querySelector('.job-input .btn');
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            button.disabled = true;
            
            // Simulate processing
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
                
                // Save data for preview
                const jobTitle = jobDescription.split(' ').slice(0, 3).join(' ');
                lastGeneratedJobTitle = jobTitle || 'Tailored Role';
                lastGeneratedJD = jobDescription;

                const now = new Date();
                lastGeneratedTime = now.toLocaleString();

                // Update small card title
                const previewTitleEl = document.querySelector('.tailored-resume-preview h3');
                if (previewTitleEl) {
                    previewTitleEl.textContent = lastGeneratedJobTitle + '.pdf';
                }

                alert('Tailored resume generated successfully! You can now click Preview to see it.');
            }, 1500);
        }

                        function openResumePreview() {
            const modal = document.getElementById('resumePreviewModal');
            const body = document.getElementById('resumePreviewBody');
            if (!modal || !body) return;

            // Use stored JD or current textarea as fallback
            const jdText = (typeof lastGeneratedJD !== 'undefined' && lastGeneratedJD)
                ? lastGeneratedJD
                : (document.getElementById('jobDescription')?.value || '');

            const safeTime = (typeof lastGeneratedTime !== 'undefined' && lastGeneratedTime)
                ? lastGeneratedTime
                : 'Just now (demo)';

            const safeTitle = (typeof lastGeneratedJobTitle !== 'undefined' && lastGeneratedJobTitle)
                ? lastGeneratedJobTitle
                : 'Target Role';

            body.innerHTML = `
                <div class="resume-grid">
                    <!-- LEFT COLUMN -->
                    <div class="resume-left">
                        <div class="resume-name">John Doe</div>
                        <div class="resume-title">Frontend Engineer</div>
                        
                        <div class="resume-contact">
                            <div>üìç Dhaka, Bangladesh</div>
                            <div>‚úâÔ∏è john.doe@example.com</div>
                            <div>üîó linkedin.com/in/johndoe</div>
                            <div>üíª github.com/johndoe</div>
                        </div>

                        <div class="resume-left-section">
                            <h3>Core Skills</h3>
                            <div>
                                <span class="resume-pill">React</span>
                                <span class="resume-pill">TypeScript</span>
                                <span class="resume-pill">Redux</span>
                                <span class="resume-pill">Jest</span>
                                <span class="resume-pill">Cypress</span>
                                <span class="resume-pill">REST APIs</span>
                            </div>
                        </div>

                        <div class="resume-left-section">
                            <h3>Tooling</h3>
                            <div>
                                <span class="resume-pill">Git</span>
                                <span class="resume-pill">CI/CD</span>
                                <span class="resume-pill">Webpack</span>
                                <span class="resume-pill">Vite</span>
                            </div>
                        </div>

                        <div class="resume-left-section">
                            <h3>Highlights</h3>
                            <ul style="margin-left:1.1rem; font-size:0.85rem; color:#e5e7eb;">
                                <li>5+ years building production React apps</li>
                                <li>Strong focus on performance & DX</li>
                                <li>Comfortable collaborating with cross-functional teams</li>
                            </ul>
                        </div>
                    </div>

                    <!-- RIGHT COLUMN -->
                    <div class="resume-right">
                        <div class="resume-header-line">
                            <div>
                                <div style="font-size:0.85rem; text-transform:uppercase; letter-spacing:0.08em; color:#6b7280;">
                                    Tailored Resume
                                </div>
                                <div style="font-size:1.05rem; font-weight:600; color:#111827;">
                                    Target role: ${safeTitle}
                                </div>
                            </div>
                            <span>Generated: ${safeTime}</span>
                        </div>

                        <div class="resume-section">
                            <h2 class="resume-section-title">Summary</h2>
                            <p>
                                Frontend engineer specializing in React and TypeScript, with experience
                                in state management, testing, and performance optimization. This resume
                                version is tailored based on the job description you provided.
                            </p>
                        </div>

                        <div class="resume-section">
                            <h2 class="resume-section-title">Matched Highlights from JD</h2>
                            <p class="jd-snippet">
                                ${jdText ? jdText.substring(0, 650) : 'No job description text available. Paste a JD and generate again for a richer match.'}
                            </p>
                        </div>

                        <div class="resume-section">
                            <h2 class="resume-section-title">Experience (Sample)</h2>
                            <ul>
                                <li>Built and maintained large-scale React applications using TypeScript and modern tooling.</li>
                                <li>Implemented state management using Redux Toolkit and Context API.</li>
                                <li>Optimized bundle size and Web Vitals, improving Lighthouse scores by 30%+.</li>
                                <li>Set up and maintained Jest + Cypress test suites with CI integration.</li>
                            </ul>
                        </div>

                        <div class="resume-section">
                            <h2 class="resume-section-title">Projects</h2>
                            <ul>
                                <li><strong>Resume Matching Platform:</strong> Full-stack MERN application that matches JDs to candidate skills and proofs.</li>
                                <li><strong>Design System:</strong> Built a reusable React component library used across 3 internal products.</li>
                            </ul>
                        </div>

                        <div class="resume-section">
                            <h2 class="resume-section-title">Education</h2>
                            <p>B.Sc. in Computer Science & Engineering ‚Äî BRAC University</p>
                        </div>
                    </div>
                </div>
            `;

            modal.classList.remove('hidden');
        }
        
            function downloadResumePDF() {
    const resumeBody = document.getElementById('resumePreviewBody');
    if (!resumeBody) {
        alert('Nothing to download yet. Please generate and preview the resume first.');
        return;
    }

    // Get just the inner resume HTML (2-column layout)
    const resumeHTML = resumeBody.innerHTML;

    // Grab your main <style> content so the design matches
    const styleTag = document.querySelector('style');
    const styles = styleTag ? styleTag.innerHTML : '';

    // Open a clean new window
    const printWindow = window.open('', '_blank');

    printWindow.document.open();
    printWindow.document.write(`
        <html>
        <head>
            <title>${lastGeneratedJobTitle || 'Tailored Resume'}</title>
            <style>
                ${styles}
                /* Reset page for print */
                body {
                    margin: 0;
                    padding: 24px;
                    background: #ffffff;
                }
                .resume-preview-body {
                    margin: 0;
                    border: none;
                    padding: 0;
                    background: #ffffff;
                }
            </style>
        </head>
        <body>
            <div class="resume-preview-body">
                ${resumeHTML}
            </div>
        </body>
        </html>
    `);
    printWindow.document.close();

    // Give it a moment to render, then trigger print dialog
    printWindow.focus();
    setTimeout(() => {
        printWindow.print();      // user selects "Save as PDF"
        printWindow.close();
    }, 500);
}

        function closeResumePreview() {
            const modal = document.getElementById('resumePreviewModal');
            if (modal) modal.classList.add('hidden');
        }



        // Smooth scrolling for sidebar links
        document.querySelectorAll('.sidebar-menu a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all links
                document.querySelectorAll('.sidebar-menu a').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Add active class to clicked link
                this.classList.add('active');
                
                // Scroll to section
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Toggle switches functionality
        document.querySelectorAll('.switch input').forEach(switchInput => {
            switchInput.addEventListener('change', function() {
                const label = this.parentElement.querySelector('.slider');
                if (this.checked) {
                    console.log('Switch turned ON');
                } else {
                    console.log('Switch turned OFF');
                }
            });
        });



                // ---------- AUTH / DASHBOARD LOGIC ----------
                (function () {
                    const token = localStorage.getItem('token');
                    const userStr = localStorage.getItem('user');
        
                    // If not logged in, send back to login page
                    if (!token || !userStr) {
                        window.location.href = 'login.html';
                        return;
                    }
        
                    let user;
                    try {
                        user = JSON.parse(userStr);
                    } catch (e) {
                        console.error('Invalid user in localStorage');
                        localStorage.removeItem('token');
                        localStorage.removeItem('user');
                        window.location.href = 'login.html';
                        return;
                    }
        
                    // This page is only for candidates
                    if (user.role !== 'candidate') {
                        window.location.href = 'login.html';
                        return;
                    }
        
                    // Update header with real name + role
                    const nameEl = document.getElementById('user-name');
                    const roleEl = document.getElementById('user-role');
                    const avatarEl = document.getElementById('user-avatar');
        
                    if (nameEl) nameEl.textContent = user.fullName || 'Candidate';
                    if (roleEl) roleEl.textContent =
                        user.role.charAt(0).toUpperCase() + user.role.slice(1);
        
                    if (avatarEl && user.fullName) {
                        const initials = user.fullName
                            .split(/\s+/)
                            .map(n => n[0]?.toUpperCase())
                            .filter(Boolean)
                            .slice(0, 2)
                            .join('');
                        avatarEl.textContent = initials || 'C';
                    }

                    // Update welcome heading with first name
                    const welcomeHeading = document.getElementById('welcome-heading');
                    if (welcomeHeading) {
                        const firstName = (user.fullName || '').split(/\s+/)[0] || 'there';
                        welcomeHeading.textContent = `Welcome back, ${firstName}!`;
                    }

        
                    // Logout button
                    const logoutBtn = document.getElementById('logout-btn');
                    if (logoutBtn) {
                        logoutBtn.addEventListener('click', () => {
                            localStorage.removeItem('token');
                            localStorage.removeItem('user');
                            window.location.href = 'login.html';
                        });
                    }
                })();
        
    </script>
</body>
</html>